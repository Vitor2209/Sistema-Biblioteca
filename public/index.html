<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Biblioteca</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Login Overlay -->
  <div id="loginOverlay" class="login-overlay" style="display:none;">
    <div class="login-card">
      <h2>Entrar</h2>
      <p>Use um usu√°rio do sistema para acessar o sistema.</p>

      <form id="loginForm" class="login-form">
        <label for="loginUser">Usu√°rio</label>
        <input id="loginUser" autocomplete="username" required />

        <label for="loginPass">Senha</label>
        <input id="loginPass" type="password" autocomplete="current-password" required />

        <button type="submit" class="btn-primary">Entrar</button>

        <p id="loginError" class="login-error"></p>

        <div class="login-hint">
          <div><b>admin</b> / admin123</div>
          <div><b>bibliotecario</b> / staff123</div>
        </div>
      </form>
    </div>
  </div>


  <div class="app">
    <!-- Sidebar -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="logo-icon">üìö</div>
        <span class="logo-text">Sistema de Biblioteca</span>
      </div>
      <nav class="sidebar-nav">
        <a href="#/dashboard" class="nav-item active" data-route="dashboard">
          <span class="nav-icon">üè†</span>
          <span>Dashboard</span>
        </a>
        <a href="#/books" class="nav-item" data-route="books">
          <span class="nav-icon">üìñ</span>
          <span>Livros</span>
        </a>
        <a href="#/readers" class="nav-item" data-route="readers">
          <span class="nav-icon">üë•</span>
          <span>Leitores</span>
        </a>
        <a href="#/loans" class="nav-item" data-route="loans">
          <span class="nav-icon">üîÑ</span>
          <span>Empr√©stimos</span>
        </a>
        <a href="#/admin" class="nav-item" data-route="admin">
          <span class="nav-icon">üõ°Ô∏è</span>
          <span>Admin</span>
        </a>
      </nav>
      <div class="sidebar-footer">
        <button class="logout-btn">
          <span class="nav-icon">üö™</span>
          <span>Sair</span>
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="main-wrapper">
      <!-- Topbar -->
      <header class="topbar">
        <h1>Sistema de Biblioteca</h1>
        <div class="user-info">
          <span id="userName">Bem-vindo!</span>
          <button class="btn-outline">Sair</button>
        </div>
      </header>

      <!-- Dashboard Content -->
      <main class="content">
        <section id="view-dashboard" class="view active">
        <!-- Stats Cards -->
        <section class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon blue">üìö</div>
            <div class="stat-content">
              <p class="stat-label">Total de Livros</p>
              <p class="stat-value blue" id="totalBooks">--</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon blue">üë•</div>
            <div class="stat-content">
              <p class="stat-label">Total de Leitores</p>
              <p class="stat-value blue" id="totalReaders">--</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon green">üîÑ</div>
            <div class="stat-content">
              <p class="stat-label">Livros Emprestados</p>
              <p class="stat-value green" id="booksLoaned">--</p>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon red">‚ö†Ô∏è</div>
            <div class="stat-content">
              <p class="stat-label">Em Atraso</p>
              <p class="stat-value red" id="booksOverdue">--</p>
            </div>
          </div>
        </section>

        <!-- Tables Section -->
        <section class="tables-grid">
          <!-- Recent Loans -->
          <div class="card">
            <div class="card-header">
              <h3>√öltimos Empr√©stimos</h3>
            </div>
            <div class="card-body">
              <table class="table">
                <thead>
                  <tr>
                    <th>Leitor</th>
                    <th>Livro</th>
                    <th>Data</th>
                  </tr>
                </thead>
                <tbody id="loansTableBody">
                  <tr><td colspan="3" class="loading">Carregando...</td></tr>
                </tbody>
              </table>
            </div>
            <div class="card-footer">
              <button id="btnGoLoans" class="btn-primary">Ver Todos ‚Üí</button>
            </div>
          </div>

          <!-- Recent Readers -->
          <div class="card">
            <div class="card-header">
              <h3>Leitores Recentes</h3>
            </div>
            <div class="card-body">
              <table class="table">
                <thead>
                  <tr>
                    <th>Nome</th>
                    <th>E-mail</th>
                  </tr>
                </thead>
                <tbody id="readersTableBody">
                  <tr><td colspan="2" class="loading">Carregando...</td></tr>
                </tbody>
              </table>
            </div>
            <div class="card-footer">
              <button id="btnGoReaders" class="btn-primary">Gerenciar Leitores ‚Üí</button>
            </div>
          </div>
        </section>

        <!-- Chart Section -->
        <section class="chart-section">
          <div class="card">
            <div class="card-header">
              <h3>Estat√≠sticas de Empr√©stimos</h3>
            </div>
            <div class="card-body">
              <div class="chart-legend">
                <span class="legend-item"><span class="legend-color blue"></span> Emprestados</span>
                <span class="legend-item"><span class="legend-color green"></span> Devolvidos</span>
              </div>
              <div class="chart-container" id="chartContainer">
                <p class="loading">Carregando gr√°fico...</p>
              </div>
            </div>
          </div>
        </section>

        </section>

        <section id="view-books" class="view">
          <div class="page-header">
            <h2>Livros</h2>
            <div class="page-actions">
              <input id="booksSearch" class="input" placeholder="Buscar por t√≠tulo ou autor..." />
              <button id="btnAddBook" class="btn-primary">+ Adicionar Livro</button>
            </div>
          </div>

          <div class="card">
            <div class="table-wrapper table-responsive">
              <table class="table table-actions-sticky">
                <thead>
                  <tr>
                    <th>T√≠tulo</th>
                    <th>Autor</th>
                    <th>Categoria</th>
                    <th>Dispon√≠vel</th>
                    <th>Total</th>
                    <th style="width: 160px;">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody id="booksTableBody"></tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="view-readers" class="view">
          <div class="page-header">
            <h2>Leitores</h2>
            <div class="page-actions">
              <input id="readersSearch" class="input" placeholder="Buscar por nome..." />
              <button id="btnAddReader" class="btn-primary">+ Adicionar Leitor</button>
            </div>
          </div>

          <div class="card">
            <div class="table-wrapper table-responsive">
              <table class="table table-actions-sticky">
                <thead>
                  <tr>
                    <th>Nome</th>
                    <th>Email</th>
                    <th>Telefone</th>
                    <th style="width: 140px;">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody id="readersFullTableBody"></tbody>
              </table>
            </div>
          </div>
        </section>

        <section id="view-loans" class="view">
          <div class="page-header">
            <h2>Empr√©stimos</h2>
            <div class="page-actions">
              <input id="loansSearch" class="input" placeholder="Buscar por leitor..." />
              <select id="loansFilter" class="input">
                <option value="">Todos</option>
                <option value="LOANED">Ativos</option>
                <option value="RETURNED">Devolvidos</option>
              </select>
              <button id="btnAddLoan" class="btn-primary">+ Novo Empr√©stimo</button>
            </div>
          </div>

          <div class="card">
            <div class="table-wrapper table-responsive">
              <table class="table table-actions-sticky">
                <thead>
                  <tr>
                    <th>Leitor</th>
                    <th>Status</th>
                    <th>Data</th>
                    <th>Vencimento</th>
                    <th>Itens</th>
                    <th style="width: 140px;">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody id="loansFullTableBody"></tbody>
              </table>
            </div>
          </div>
        </section>

      
        <section id="view-admin" class="view">
          <div class="page-header">
            <h2>Administra√ß√£o</h2>
            <div class="page-actions">
              <button id="btnAdminToken" class="btn-outline">Definir Token</button>
              <button id="btnAdminRefresh" class="btn-primary">Recarregar</button>
            </div>
          </div>

          <div class="card">
            <p class="loading" id="adminStatus">Informe o token para acessar.</p>
          </div>

          <div class="card" style="margin-top: 14px;">
            <div class="page-header" style="margin-bottom: 10px;">
              <h3 style="margin:0;">Usu√°rios</h3>
              <button id="btnAdminNewUser" class="btn-primary">+ Criar Usu√°rio</button>
            </div>

            <div class="table-wrapper table-responsive">
              <table class="table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Usu√°rio</th>
                    <th>Role</th>
                    <th>Criado em</th>
                    <th style="width: 240px;">A√ß√µes</th>
                  </tr>
                </thead>
                <tbody id="adminUsersBody"></tbody>
              </table>
            </div>
          </div>
        </section>

</main>
    </div>
  </div>

  <script src="app.js"></script>

  <!-- App Modal -->
  <div id="appModal" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <div class="modal-header">
        <div>
          <h3 id="modalTitle" class="modal-title">T√≠tulo</h3>
          <p id="modalSubtitle" class="modal-subtitle">Descri√ß√£o</p>
        </div>
        <button id="modalClose" class="icon-btn" aria-label="Fechar">‚úï</button>
      </div>

      <div id="modalBody" class="modal-body"></div>

      <div class="modal-footer">
        <button id="modalCancel" class="btn-outline">Cancelar</button>
        <button id="modalConfirm" class="btn-primary">Salvar</button>
      </div>
    </div>
  </div>

</body>
</html>

